angular.module("bandcommanderApp").factory("AuthService",["$http","Session","$rootScope",function(t,e,n){var r={};return r.login=function(r){return t({method:"POST",url:n.apiUrl+"/authenticate",data:r}).then(function(t){return e.create(t.data.id,t.data.id,t.data.role,t.data.token),t.data.user})},r.isAuthenticated=function(){return!!e.userRole()},r.isAuthorized=function(t){return angular.isArray(t)||(t=[t]),r.isAuthenticated()&&-1!==t.indexOf(e.userRole())},r}]),angular.module("bandcommanderApp").factory("Event",["$http","$rootScope","AUTH_EVENTS","$rootScope","$cookies",function(t,e,n,e,r){return e.jwt=r.get("jwt"),e.apiUrl="http://localhost:8080",{all:function(){return t({method:"GET",url:e.apiUrl+"/events/",headers:{"x-access-token":e.jwt}}).then(function(t){return t.data},function(t){e.$broadcast(n.notAuthenticated)})},one:function(r){return t({method:"GET",url:e.apiUrl+"/event/"+r,headers:{"x-access-token":e.jwt}}).then(function(t){return t.data},function(t){e.$broadcast(n.notAuthenticated)})},create:function(r){return t({method:"POST",url:e.apiUrl+"/event/new/",data:r,headers:{"x-access-token":e.jwt}}).then(function(t){return t.data},function(t){e.$broadcast(n.notAuthenticated)})},update:function(n){return t({method:"POST",url:e.apiUrl+"/event/"+n._id,data:n,headers:{"x-access-token":e.jwt}})}}}]),angular.module("bandcommanderApp").factory("Page",function(){var t="Startseite";return{title:function(){return t},setTitle:function(e){t=e+" | Bandcommander"}}}),angular.module("bandcommanderApp").factory("Session",["$rootScope","$cookies","$window",function(t,e,n){return{create:function(r,o,a,u){var c=r,i=o,d=u,s=a,l=new n.Date,f=new n.Date(l.getFullYear(),l.getMonth()+6,l.getDate());return t.jwt=d,n.localStorage.setItem("jwt",d),n.localStorage.setItem("userId",i),n.localStorage.setItem("userRole",s),n.localStorage.setItem("sessionId",c),e.put("jwt",d,{expires:f}),c},destroy:function(){n.localStorage.removeItem("jwt"),n.localStorage.removeItem("userId"),n.localStorage.removeItem("userRole"),n.localStorage.removeItem("sessionId")},id:function(){return n.localStorage.getItem("sessionId")},userId:function(){return n.localStorage.getItem("userId")},jwt:function(){return n.localStorage.getItem("jwt")},userRole:function(){return n.localStorage.getItem("userRole")}}}]),angular.module("bandcommanderApp").factory("Toolbar",function(){var t='ng-click="Page.setTitle()"',e="ü§ì";return{action:function(){return t},icon:function(){return e},setAction:function(t){"Menu"==t&&(e="üçî"),"Back"==t&&(e="‚¨ÖÔ∏è")}}}),angular.module("bandcommanderApp").factory("User",["$http","$rootScope","AUTH_EVENTS","$rootScope","$cookies",function(t,e,n,e,r){return e.jwt=r.get("jwt"),{all:function(){return t({method:"GET",url:e.apiUrl+"/users/",headers:{"x-access-token":e.jwt}}).then(function(t){return t.data},function(t){e.$broadcast(n.notAuthenticated)})},band:function(r){return t({method:"GET",url:e.apiUrl+"/band/"+r,headers:{"x-access-token":e.jwt}}).then(function(t){return t.data},function(t){e.$broadcast(n.notAuthenticated)})},one:function(r){return t({method:"GET",url:e.apiUrl+"/user/"+r,headers:{"x-access-token":e.jwt}}).then(function(t){return t.data},function(t){e.$broadcast(n.notAuthenticated)})},create:function(r){return t({method:"POST",url:e.apiUrl+"/user/new/",data:r,headers:{"x-access-token":e.jwt}}).then(function(t){return t.data},function(t){e.$broadcast(n.notAuthenticated)})},update:function(n){return t({method:"POST",url:e.apiUrl+"/user/"+n._id,data:n,headers:{"x-access-token":e.jwt}})}}}]);